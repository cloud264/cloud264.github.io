"use strict";(()=>{var n=class{constructor(t,e){this.distance=1/0;this.visited=!1;this.x=t,this.y=e}setDistance(t){this.distance=t}getDistance(){return this.distance}setVisited(t){this.visited=t}isVisited(){return this.visited}getX(){return this.x}getY(){return this.y}};var i=class{static{this.GRID_SIZE_X=100}static{this.GRID_SIZE_Y=100}};var h=class{constructor(t){this.game=t,this.canvas=document.getElementById("dijkstra-canvas"),this.ctx=this.canvas.getContext("2d")}render(){this.drawBackground()}drawBackground(){this.ctx.lineWidth=2,this.ctx.strokeStyle="#121212",this.ctx.fillStyle="#8dcdff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}};var d=class{constructor(t){this.game=t,this.currentNode=this.game.getGrid()[78][80],this.currentNode.setVisited(!0),this.startNode=this.currentNode,this.targetNode=this.game.getGrid()[22][44],this.canvas=document.getElementById("dijkstra-canvas"),this.ctx=this.canvas.getContext("2d")}checkShortestPath(t,e){let r=this.game.getGrid()[this.currentNode.getX()+t][this.currentNode.getY()+e],s=this.getDistance(r,this.targetNode);r.setDistance(s)}getDistance(t,e){let r=Math.max(t.getX(),e.getX()),s=Math.max(t.getY(),e.getY()),m=Math.min(t.getX(),e.getX()),g=Math.min(t.getY(),e.getY());return r-m+s-g}findPath(){this.currentNode.getX()+1<i.GRID_SIZE_X&&this.checkShortestPath(1,0),this.currentNode.getY()+1<i.GRID_SIZE_Y&&this.checkShortestPath(0,1),this.currentNode.getX()-1>=0&&this.checkShortestPath(-1,0),this.currentNode.getY()-1>=0&&this.checkShortestPath(0,-1);for(let t=0;t<i.GRID_SIZE_X;t++)for(let e=0;e<i.GRID_SIZE_Y;e++){let r=this.game.getGrid()[t][e];!r.isVisited()&&r.getDistance()<this.currentNode.getDistance()&&(r.setVisited(!0),this.currentNode=r)}}drawNode(t){this.ctx.strokeRect(t.getX()*this.canvas.width/i.GRID_SIZE_X,t.getY()*this.canvas.height/i.GRID_SIZE_Y,this.canvas.width/i.GRID_SIZE_X,this.canvas.height/i.GRID_SIZE_Y)}renderPath(){let t=this.game.getGrid();for(let e=0;e<i.GRID_SIZE_X;e++)for(let r=0;r<i.GRID_SIZE_Y;r++){let s=t[e][r];s===this.startNode?(this.ctx.strokeStyle="purple",this.drawNode(s)):s===this.targetNode?(this.ctx.strokeStyle="green",this.drawNode(s)):s.isVisited()&&(this.ctx.strokeStyle="red",this.drawNode(s))}}};var o=class{constructor(){this.tick=t=>{this.deltaTime=(t-this.timestampOld)/1e3,this.timestampOld=t,this.pathfinder!==void 0&&this.pathfinder.findPath(),this.gameRenderer.render(),this.pathfinder!==void 0&&this.pathfinder.renderPath(),window.requestAnimationFrame(this.tick)};this.grid=[],this.gameRenderer=new h(this),this.deltaTime=0,this.timestampOld=0,this.setupGrid(),this.pathfinder=new d(this)}restart(){this.deltaTime=0,this.timestampOld=0}setupGrid(){for(let t=0;t<i.GRID_SIZE_X;t++){this.grid[t]=[];for(let e=0;e<i.GRID_SIZE_Y;e++)this.grid[t][e]=new n(t,e)}}getGrid(){return this.grid}getTimeDelta(){return this.deltaTime}renderer(){return this.gameRenderer}};var c;function l(){c=new o,window.requestAnimationFrame(c.tick)}window.onload=l;})();
